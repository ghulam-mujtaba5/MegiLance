/* AI-HINT: Common styles for MegaLoader. Keep tokens local; rely on CSS vars with safe fallbacks. */
/* Removed empty :root to satisfy lint */

.backdrop {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: color-mix(in oklab, var(--ml-bg, #0b1020) 75%, transparent);
  -webkit-backdrop-filter: blur(8px) saturate(140%);
  backdrop-filter: blur(8px) saturate(140%);
  z-index: 9999;
}

.container {
  width: min(92vw, 560px);
  padding: 28px 28px 24px;
  border-radius: 20px;
  background: linear-gradient(180deg, color-mix(in oklab, var(--ml-surface, #0f162e) 82%, transparent), color-mix(in oklab, var(--ml-surface-2, #0b1226) 88%, transparent));
  /* Fallback border for older browsers */
  border: 1px solid #1e2a52;
  box-shadow: 0 20px 60px color-mix(in oklab, var(--ml-shadow, #000) 60%, transparent), inset 0 1px 0 rgba(255,255,255,0.05);
}

.ringWrapper {
  position: relative;
  width: 160px;
  height: 160px;
  margin: 6px auto 18px;
}

/* Outer rotating ring */
.ringOuter {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: conic-gradient(from 0deg, var(--ml-blue, #4573df), color-mix(in oklab, var(--ml-orange, #ff9800) 40%, var(--ml-blue, #4573df)) 40%, transparent 60%, transparent 100%);
  mask: radial-gradient(circle 64px at center, transparent 60px, black 61px);
  animation: spin 1.6s linear infinite;
  filter: drop-shadow(0 2px 12px color-mix(in oklab, var(--ml-blue, #4573df) 55%, transparent));
}

/* Inner pulse ring */
.ringInner {
  position: absolute;
  inset: 22px;
  border-radius: 50%;
  background: radial-gradient(ellipse at 50% 45%, color-mix(in oklab, var(--ml-blue, #4573df) 18%, transparent), transparent 60%);
  box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--ml-blue, #4573df) 25%, transparent);
  animation: breathe 2.6s ease-in-out infinite;
}

/* Spark that orbits the ring */
.spark {
  position: absolute;
  top: -6px;
  left: 50%;
  width: 10px;
  height: 10px;
  margin-left: -5px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, white 0%, var(--ml-orange, #ff9800) 35%, color-mix(in oklab, var(--ml-orange, #ff9800) 40%, transparent) 70%);
  box-shadow: 0 0 18px 6px color-mix(in oklab, var(--ml-orange, #ff9800) 45%, transparent);
  transform-origin: 50% 86px;
  animation: orbit 1.6s linear infinite;
}

.wordmark {
  display: flex;
  justify-content: center;
  font-family: var(--ml-heading, 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, 'Helvetica Neue', Arial);
  letter-spacing: 0.2px;
  margin: 2px 0 12px;
  -webkit-user-select: none;
  user-select: none;
}
.wordLeft {
  font-weight: 700;
  font-size: 28px;
  color: var(--ml-blue, #4573df);
}
.wordRight {
  font-weight: 700;
  font-size: 28px;
  background: linear-gradient(90deg, var(--ml-blue, #4573df), var(--ml-orange, #ff9800));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.progressBar {
  position: relative;
  height: 6px;
  border-radius: 999px;
  background: color-mix(in oklab, var(--ml-track, #0d1530) 70%, transparent);
  /* Fallback border for older browsers */
  border: 1px solid #1e2a52;
  overflow: hidden;
}
.progressFill {
  position: absolute;
  inset: 0;
  transform: translateX(-100%);
  background: linear-gradient(90deg, color-mix(in oklab, var(--ml-blue, #4573df) 40%, transparent), var(--ml-blue, #4573df), color-mix(in oklab, var(--ml-orange, #ff9800) 40%, transparent));
  animation: load 2.2s ease-in-out infinite;
}

.dots {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin: 12px 0 0;
}
.dots span {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: color-mix(in oklab, var(--ml-blue, #4573df) 70%, transparent);
  animation: bounce 1.4s ease-in-out infinite;
}
.dots span:nth-child(2) { animation-delay: 0.15s; }
.dots span:nth-child(3) { animation-delay: 0.3s; }

.copy { text-align: center; margin-top: 12px; }
.title {
  margin: 6px 0 0;
  font-size: 16px;
  font-weight: 600;
  /* Fallback color for older browsers */
  color: #eaf1ff;
  color: #eaf1ff; /* will be overridden in @supports */
}
.subtitle {
  margin: 4px 0 0;
  font-size: 12.5px;
  line-height: 1.4;
  /* Fallback color for older browsers */
  color: #a7b4d6;
  color: #a7b4d6; /* will be overridden in @supports */
}

@keyframes spin { to { transform: rotate(360deg); } }
@keyframes orbit { to { transform: rotate(360deg); } }
@keyframes breathe {
  0%, 100% { transform: scale(0.98); opacity: 0.85; }
  50% { transform: scale(1); opacity: 1; }
}
@keyframes load {
  0% { transform: translateX(-100%); }
  55% { transform: translateX(0%); }
  100% { transform: translateX(100%); }
}
@keyframes bounce {
  0%, 100% { transform: translateY(0); opacity: 0.7; }
  50% { transform: translateY(-6px); opacity: 1; }
}
/* Accessibility: Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .ringOuter,
  .spark,
  .progressFill,
  .dots span,
  .ringInner {
    animation: none !important;
  }
}

/* Modern color overrides guarded by support check */
@supports (color: color-mix(in oklab, white, black)) {
  .backdrop {
    background: color-mix(in oklab, var(--ml-bg, #0b1020) 75%, transparent);
  }

  .container {
    background: linear-gradient(180deg,
      color-mix(in oklab, var(--ml-surface, #0f162e) 82%, transparent),
      color-mix(in oklab, var(--ml-surface-2, #0b1226) 88%, transparent)
    );
    border: 1px solid color-mix(in oklab, var(--ml-border, #1e2a52) 60%, transparent);
    box-shadow: 0 20px 60px color-mix(in oklab, var(--ml-shadow, #000) 60%, transparent), inset 0 1px 0 rgba(255,255,255,0.05);
  }

  .ringOuter {
    background: conic-gradient(from 0deg, var(--ml-blue, #4573df), color-mix(in oklab, var(--ml-orange, #ff9800) 40%, var(--ml-blue, #4573df)) 40%, transparent 60%, transparent 100%);
    filter: drop-shadow(0 2px 12px color-mix(in oklab, var(--ml-blue, #4573df) 55%, transparent));
  }

  .ringInner {
    background: radial-gradient(ellipse at 50% 45%, color-mix(in oklab, var(--ml-blue, #4573df) 18%, transparent), transparent 60%);
    box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--ml-blue, #4573df) 25%, transparent);
  }

  .spark {
    background: radial-gradient(circle at 30% 30%, white 0%, var(--ml-orange, #ff9800) 35%, color-mix(in oklab, var(--ml-orange, #ff9800) 40%, transparent) 70%);
    box-shadow: 0 0 18px 6px color-mix(in oklab, var(--ml-orange, #ff9800) 45%, transparent);
  }

  .progressBar {
    background: color-mix(in oklab, var(--ml-track, #0d1530) 70%, transparent);
    border: 1px solid color-mix(in oklab, var(--ml-border, #1e2a52) 60%, transparent);
  }

  .progressFill {
    background: linear-gradient(90deg, color-mix(in oklab, var(--ml-blue, #4573df) 40%, transparent), var(--ml-blue, #4573df), color-mix(in oklab, var(--ml-orange, #ff9800) 40%, transparent));
  }

  .dots span {
    background: color-mix(in oklab, var(--ml-blue, #4573df) 70%, transparent);
  }

  .title { color: color-mix(in oklab, var(--ml-fg, #eaf1ff) 90%, transparent); }
  .subtitle { color: color-mix(in oklab, var(--ml-fg-muted, #a7b4d6) 85%, transparent); }
}

/* Responsive tweaks */
@media (max-width: 520px) {
  .ringWrapper { width: 132px; height: 132px; }
  .wordLeft, .wordRight { font-size: 24px; }
  .container { padding: 22px 18px 18px; }
}
